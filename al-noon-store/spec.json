{
  "openapi": "3.0.3",
  "info": {
    "title": "Al-Noon API",
    "version": "1.0.0",
    "description": "Backend API for Al-Noon dashboard and storefront"
  },
  "servers": [
    {
      "url": "http://localhost:4000",
      "description": "API server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT from sign-in (cookie `al_noon_token` or Authorization: Bearer <token>)"
      }
    },
    "schemas": {
      "ApiError": {
        "type": "object",
        "description": "Error response envelope (4xx/5xx). Message uses x-language / Accept-Language (en | ar).",
        "required": [
          "success",
          "message",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "description": "Human-readable message (translated)"
          },
          "code": {
            "type": "string",
            "description": "i18n key or error code (e.g. CONFLICT)",
            "nullable": true
          },
          "data": {
            "type": "object",
            "nullable": true,
            "description": "Always null on error"
          },
          "details": {
            "type": "object",
            "description": "Validation or extra details",
            "nullable": true
          }
        },
        "example": {
          "success": false,
          "message": "Validation error",
          "code": "errors.common.validation_error",
          "data": null
        }
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer"
          },
          "page": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "totalPages": {
            "type": "integer"
          }
        }
      },
      "LocalizedString": {
        "type": "object",
        "description": "en/ar localized text",
        "properties": {
          "en": {
            "type": "string"
          },
          "ar": {
            "type": "string"
          }
        }
      },
      "ProductCategoryRef": {
        "type": "object",
        "description": "Category when populated (list/detail). Storefront uses _id only for catalog filters.",
        "properties": {
          "_id": {
            "type": "string"
          }
        }
      },
      "ProductMediaItem": {
        "type": "object",
        "description": "Single media asset (image, video, or gif) – generic and reusable",
        "required": [
          "type",
          "url"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "image",
              "video",
              "gif"
            ],
            "description": "Explicit type for frontend rendering"
          },
          "url": {
            "type": "string",
            "description": "Asset URL"
          },
          "alt": {
            "type": "string",
            "description": "Optional alt text (accessibility)",
            "nullable": true
          },
          "durationSeconds": {
            "type": "number",
            "description": "Optional video duration",
            "nullable": true
          }
        }
      },
      "ProductMedia": {
        "type": "object",
        "description": "Product media: default (required), optional hover, optional preview video",
        "required": [
          "default"
        ],
        "properties": {
          "default": {
            "$ref": "#/components/schemas/ProductMediaItem",
            "description": "Shown by default (card and detail)"
          },
          "hover": {
            "$ref": "#/components/schemas/ProductMediaItem",
            "description": "Shown on hover (e.g. product card)",
            "nullable": true
          },
          "previewVideo": {
            "$ref": "#/components/schemas/ProductMediaItem",
            "description": "Optional preview video (e.g. product detail)",
            "nullable": true
          }
        }
      },
      "ProductListItem": {
        "type": "object",
        "description": "Product in list responses (GET /products, GET /products/:id/related, store newArrivals). With ?for=storefront: tags included; has media only; images, videos, imageColors omitted.",
        "properties": {
          "_id": {
            "type": "string"
          },
          "name": {
            "$ref": "#/components/schemas/LocalizedString"
          },
          "description": {
            "$ref": "#/components/schemas/LocalizedString",
            "nullable": true
          },
          "category": {
            "oneOf": [
              {
                "type": "string",
                "description": "Category ID when not populated"
              },
              {
                "$ref": "#/components/schemas/ProductCategoryRef"
              }
            ]
          },
          "price": {
            "type": "number"
          },
          "discountPrice": {
            "type": "number",
            "nullable": true
          },
          "media": {
            "$ref": "#/components/schemas/ProductMedia",
            "description": "Structured media: default, hover, previewVideo"
          },
          "stock": {
            "type": "integer"
          },
          "status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "INACTIVE"
            ]
          },
          "isNewArrival": {
            "type": "boolean"
          },
          "sizes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "sizeDescriptions": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "colors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "details": {
            "$ref": "#/components/schemas/LocalizedString",
            "nullable": true
          },
          "stylingTip": {
            "$ref": "#/components/schemas/LocalizedString",
            "nullable": true
          },
          "deletedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "averageRating": {
            "type": "number",
            "description": "Present when ratings exist",
            "nullable": true
          },
          "ratingCount": {
            "type": "integer",
            "description": "Present on list",
            "nullable": true
          },
          "soldQty": {
            "type": "integer",
            "description": "Units sold",
            "nullable": true
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Present when ?for=storefront; for clickable filter links on product detail",
            "nullable": true
          },
          "slug": {
            "type": "object",
            "properties": {
              "en": {
                "type": "string"
              },
              "ar": {
                "type": "string"
              }
            },
            "description": "URL-friendly slugs per locale"
          }
        }
      },
      "ProductColorAvailability": {
        "type": "object",
        "description": "Per-color availability. Color-specific images come from refetch with ?color=.",
        "properties": {
          "color": {
            "type": "string"
          },
          "available": {
            "type": "boolean"
          },
          "outOfStock": {
            "type": "boolean"
          }
        }
      },
      "ProductAvailabilityDetail": {
        "type": "object",
        "description": "Availability block on GET /products/:id. When product has no variant records, variants are synthesized from global stock.",
        "properties": {
          "colors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductColorAvailability"
            }
          },
          "sizes": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "size": {
                  "type": "string"
                },
                "available": {
                  "type": "boolean"
                },
                "outOfStock": {
                  "type": "boolean"
                }
              }
            }
          },
          "variants": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "color": {
                  "type": "string"
                },
                "size": {
                  "type": "string"
                },
                "stock": {
                  "type": "integer"
                },
                "outOfStock": {
                  "type": "boolean"
                }
              }
            }
          }
        }
      },
      "ProductData": {
        "type": "object",
        "description": "Product (GET /products/:id with ?for=storefront returns this slim shape). Admin CRUD may return additional fields. For storefront: tags are included (for clickable filter links); vendor, imageColors, defaultMediaType, hoverMediaType, weightUnit, sizeDescriptions, variants, __v, createdAt, updatedAt, isNewArrival are omitted.",
        "properties": {
          "_id": {
            "type": "string"
          },
          "name": {
            "$ref": "#/components/schemas/LocalizedString"
          },
          "description": {
            "$ref": "#/components/schemas/LocalizedString",
            "nullable": true
          },
          "category": {
            "oneOf": [
              {
                "type": "string",
                "description": "Category ID when not populated"
              },
              {
                "$ref": "#/components/schemas/ProductCategoryRef"
              }
            ]
          },
          "price": {
            "type": "number"
          },
          "discountPrice": {
            "type": "number",
            "nullable": true
          },
          "media": {
            "$ref": "#/components/schemas/ProductMedia",
            "description": "Structured media: default, hover, previewVideo"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Full gallery (single-product responses)"
          },
          "videos": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Video URLs (single-product responses)"
          },
          "stock": {
            "type": "integer"
          },
          "status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "INACTIVE"
            ]
          },
          "sizes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "colors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "details": {
            "$ref": "#/components/schemas/LocalizedString",
            "nullable": true
          },
          "stylingTip": {
            "$ref": "#/components/schemas/LocalizedString",
            "nullable": true
          },
          "inStock": {
            "type": "boolean"
          },
          "discountPercent": {
            "type": "integer",
            "description": "Discount % when discountPrice is set, e.g. 30 for 30% off",
            "nullable": true
          },
          "formattedDetails": {
            "type": "object",
            "description": "Parsed rich-text details (paragraphs, lists) per locale",
            "nullable": true,
            "properties": {
              "en": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              },
              "ar": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              }
            }
          },
          "averageRating": {
            "type": "number",
            "description": "Present when ratings exist",
            "nullable": true
          },
          "ratingCount": {
            "type": "integer",
            "description": "Present when ratings exist",
            "nullable": true
          },
          "soldQty": {
            "type": "integer",
            "description": "Units sold",
            "nullable": true
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Free-form tags for filtering; included in storefront for clickable links to product listing filtered by tag",
            "nullable": true
          },
          "slug": {
            "type": "object",
            "properties": {
              "en": {
                "type": "string"
              },
              "ar": {
                "type": "string"
              }
            },
            "description": "URL-friendly slugs per locale"
          },
          "availability": {
            "$ref": "#/components/schemas/ProductAvailabilityDetail",
            "description": "Present on GET /products/:id"
          },
          "selectedVariant": {
            "type": "object",
            "description": "Present when GET /products/:id is called with both ?color= and ?size=. Contains stock and outOfStock for that variant.",
            "nullable": true,
            "properties": {
              "color": {
                "type": "string"
              },
              "size": {
                "type": "string"
              },
              "stock": {
                "type": "integer"
              },
              "outOfStock": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "ProductSingleData": {
        "type": "object",
        "description": "Payload for get/create/update/delete/status/stock (single product)",
        "required": [
          "product"
        ],
        "properties": {
          "product": {
            "$ref": "#/components/schemas/ProductData"
          }
        }
      },
      "InventoryProductsData": {
        "type": "object",
        "description": "Low-stock or out-of-stock list payload",
        "required": [
          "products"
        ],
        "properties": {
          "products": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductData"
            }
          },
          "threshold": {
            "type": "integer",
            "description": "Low-stock threshold (low-stock endpoint only)",
            "nullable": true
          }
        }
      },
      "TopSellingItem": {
        "type": "object",
        "description": "Top selling item (productId, name, image, totalQty)",
        "properties": {
          "productId": {
            "type": "string"
          },
          "name": {
            "$ref": "#/components/schemas/LocalizedString"
          },
          "image": {
            "type": "string",
            "nullable": true
          },
          "totalQty": {
            "type": "integer"
          }
        }
      },
      "TopSellingData": {
        "type": "object",
        "description": "Top selling products payload",
        "required": [
          "topSelling"
        ],
        "properties": {
          "topSelling": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TopSellingItem"
            }
          }
        }
      },
      "Health": {
        "type": "object",
        "description": "Health check response",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "status": {
                "type": "string",
                "example": "ok"
              },
              "dbConnected": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "StoreHomeResponse": {
        "type": "object",
        "description": "Unified home page data for storefront (GET /api/store/home). Single endpoint with all sections: store config, hero, new arrivals, collections, feedbacks, announcement bar, promo banner.",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "home": {
                "type": "object",
                "properties": {
                  "store": {
                    "type": "object",
                    "properties": {
                      "storeName": {
                        "type": "object",
                        "properties": {
                          "en": {
                            "type": "string"
                          },
                          "ar": {
                            "type": "string"
                          }
                        }
                      },
                      "logo": {
                        "type": "string"
                      },
                      "quickLinks": {
                        "type": "array",
                        "items": {
                          "type": "object"
                        }
                      },
                      "socialLinks": {
                        "type": "object"
                      },
                      "newsletterEnabled": {
                        "type": "boolean"
                      }
                    }
                  },
                  "hero": {
                    "type": "object",
                    "description": "Hero section config with images/videos, title, subtitle, CTA"
                  },
                  "heroEnabled": {
                    "type": "boolean"
                  },
                  "newArrivalsLimit": {
                    "type": "integer"
                  },
                  "newArrivals": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/ProductListItem"
                    },
                    "description": "New-arrival products with media"
                  },
                  "newArrivalsSectionImages": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Section media for New Arrivals block"
                  },
                  "newArrivalsSectionVideos": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "homeCollections": {
                    "type": "array",
                    "items": {
                      "type": "object"
                    },
                    "description": "Home page collections/categories"
                  },
                  "homeCollectionsDisplayLimit": {
                    "type": "integer"
                  },
                  "ourCollectionSectionImages": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Section media for Our Collection block"
                  },
                  "ourCollectionSectionVideos": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "feedbackSectionEnabled": {
                    "type": "boolean"
                  },
                  "feedbackDisplayLimit": {
                    "type": "integer"
                  },
                  "feedbacks": {
                    "type": "array",
                    "items": {
                      "type": "object"
                    },
                    "description": "Approved customer feedback/reviews"
                  },
                  "announcementBar": {
                    "type": "object",
                    "description": "Top announcement bar config"
                  },
                  "promoBanner": {
                    "type": "object",
                    "description": "Promotional banner config"
                  }
                }
              }
            }
          }
        }
      },
      "PageResponse": {
        "type": "object",
        "description": "Page content by slug",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "page": {
                "type": "object",
                "properties": {
                  "slug": {
                    "type": "string"
                  },
                  "title": {
                    "type": "object",
                    "properties": {
                      "en": {
                        "type": "string"
                      },
                      "ar": {
                        "type": "string"
                      }
                    }
                  },
                  "content": {
                    "type": "object",
                    "properties": {
                      "en": {
                        "type": "string"
                      },
                      "ar": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "MessageDataResponse": {
        "type": "object",
        "description": "Success response: success, optional message (translated), optional data",
        "required": [
          "success"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "nullable": true,
            "description": "i18n message (x-language / Accept-Language)"
          },
          "data": {
            "type": "object",
            "nullable": true
          }
        }
      },
      "NewsletterConflictResponse": {
        "type": "object",
        "description": "409 when email is already subscribed; FE can check code or alreadySubscribed",
        "required": [
          "success",
          "message",
          "data",
          "alreadySubscribed"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "description": "Translated message"
          },
          "code": {
            "type": "string",
            "example": "CONFLICT"
          },
          "data": {
            "type": "object",
            "nullable": true
          },
          "alreadySubscribed": {
            "type": "boolean",
            "example": true
          }
        }
      },
      "AuthResponse": {
        "type": "object",
        "description": "Auth success with token and user",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "token": {
                "type": "string"
              },
              "user": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "ADMIN",
                      "USER"
                    ]
                  }
                }
              }
            }
          }
        }
      },
      "ProfileResponse": {
        "type": "object",
        "description": "Current user profile",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "user": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "ADMIN",
                      "USER"
                    ]
                  }
                }
              }
            }
          }
        }
      },
      "SignOutResponse": {
        "type": "object",
        "description": "Signed out",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "nullable": true
          }
        }
      },
      "PaginatedSubscribersResponse": {
        "type": "object",
        "description": "Paginated subscribers list",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "subscribers": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      },
      "FilterOptionItem": {
        "type": "object",
        "description": "Single filter option for E-commerce dropdowns (availability or sort). Use value in GET /api/products query params.",
        "required": [
          "value",
          "labelEn",
          "labelAr"
        ],
        "properties": {
          "value": {
            "type": "string",
            "description": "Query value (e.g. inStock, newest). Send as ?availability= or ?sort="
          },
          "labelEn": {
            "type": "string",
            "description": "Display label (English)"
          },
          "labelAr": {
            "type": "string",
            "description": "Display label (Arabic)"
          }
        },
        "example": {
          "value": "inStock",
          "labelEn": "In stock",
          "labelAr": "متوفر"
        }
      },
      "AvailabilityFiltersResponse": {
        "type": "object",
        "description": "Response of GET /api/products/filters/availability. Use data[].value in GET /api/products?availability=.",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FilterOptionItem"
            },
            "description": "Availability options. value: all | inStock | outOfStock"
          }
        },
        "example": {
          "success": true,
          "data": [
            {
              "value": "all",
              "labelEn": "All",
              "labelAr": "الكل"
            },
            {
              "value": "inStock",
              "labelEn": "In stock",
              "labelAr": "متوفر"
            },
            {
              "value": "outOfStock",
              "labelEn": "Out of stock",
              "labelAr": "غير متوفر"
            }
          ]
        }
      },
      "SortFiltersResponse": {
        "type": "object",
        "description": "Response of GET /api/products/filters/sort. Use data[].value in GET /api/products?sort=. Values follow Shopify ProductCollectionSortKeys style.",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FilterOptionItem"
            },
            "description": "Sort options (Shopify-style): BEST_SELLING | CREATED_DESC | PRICE_ASC | PRICE_DESC | TITLE_ASC | TITLE_DESC | MANUAL"
          }
        },
        "example": {
          "success": true,
          "data": [
            {
              "value": "BEST_SELLING",
              "labelEn": "Best selling",
              "labelAr": "الأكثر مبيعاً"
            },
            {
              "value": "CREATED_DESC",
              "labelEn": "Newest",
              "labelAr": "الأحدث"
            },
            {
              "value": "PRICE_ASC",
              "labelEn": "Price: Low to High",
              "labelAr": "السعر: منخفض إلى عالي"
            },
            {
              "value": "PRICE_DESC",
              "labelEn": "Price: High to Low",
              "labelAr": "السعر: عالي إلى منخفض"
            },
            {
              "value": "TITLE_ASC",
              "labelEn": "Name A–Z",
              "labelAr": "الاسم أ–ي"
            },
            {
              "value": "TITLE_DESC",
              "labelEn": "Name Z–A",
              "labelAr": "الاسم ي–أ"
            },
            {
              "value": "MANUAL",
              "labelEn": "Manual",
              "labelAr": "يدوي"
            }
          ]
        }
      },
      "ProductListAppliedFilters": {
        "type": "object",
        "description": "Query params actually applied by list products (echo of handled filters)",
        "properties": {
          "sort": {
            "type": "string",
            "enum": [
              "newest",
              "priceAsc",
              "priceDesc",
              "nameAsc",
              "nameDesc",
              "bestSelling",
              "highestSelling",
              "lowSelling"
            ],
            "description": "Sort applied (default newest)"
          },
          "availability": {
            "type": "string",
            "enum": [
              "all",
              "inStock",
              "outOfStock"
            ],
            "description": "Stock filter applied (all = no filter)"
          },
          "categoryId": {
            "type": "string",
            "nullable": true,
            "description": "Category ID when filtered"
          },
          "categoryName": {
            "type": "object",
            "nullable": true,
            "properties": {
              "en": {
                "type": "string"
              },
              "ar": {
                "type": "string"
              }
            },
            "description": "Category name (en/ar) when filtered"
          },
          "search": {
            "type": "string",
            "nullable": true,
            "description": "Search term when provided"
          },
          "status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "INACTIVE"
            ],
            "nullable": true
          },
          "newArrival": {
            "type": "boolean",
            "nullable": true,
            "description": "true when filtering new arrivals"
          },
          "minPrice": {
            "type": "number",
            "nullable": true
          },
          "maxPrice": {
            "type": "number",
            "nullable": true
          },
          "color": {
            "type": "string",
            "nullable": true
          },
          "minRating": {
            "type": "number",
            "nullable": true,
            "description": "1–5 when filtering by min rating"
          }
        }
      },
      "PaginatedProductsResponse": {
        "type": "object",
        "description": "Full response body returned by list products: success, data (array of ProductListItem), pagination, appliedFilters.",
        "required": [
          "success",
          "data",
          "pagination"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true,
            "description": "Always true on 200"
          },
          "message": {
            "type": "string",
            "nullable": true,
            "description": "Optional i18n message"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductListItem"
            },
            "description": "Products list (media only; no images/videos/imageColors)"
          },
          "pagination": {
            "type": "object",
            "required": [
              "total",
              "page",
              "limit",
              "totalPages"
            ],
            "properties": {
              "total": {
                "type": "integer",
                "example": 42
              },
              "page": {
                "type": "integer",
                "example": 1
              },
              "limit": {
                "type": "integer",
                "example": 20
              },
              "totalPages": {
                "type": "integer",
                "example": 3
              }
            },
            "description": "Pagination metadata"
          },
          "appliedFilters": {
            "$ref": "#/components/schemas/ProductListAppliedFilters",
            "description": "Query params that were applied (sort, availability, category, search, etc.)"
          }
        },
        "example": {
          "success": true,
          "data": [
            {
              "_id": "507f1f77bcf86cd799439011",
              "name": {
                "en": "Product name",
                "ar": "اسم المنتج"
              },
              "description": {
                "en": "Description",
                "ar": "الوصف"
              },
              "category": {
                "_id": "507f1f77bcf86cd799439012",
                "name": {
                  "en": "Category",
                  "ar": "فئة"
                },
                "status": "PUBLISHED"
              },
              "price": 99.99,
              "discountPrice": 79.99,
              "media": {
                "default": {
                  "type": "image",
                  "url": "/uploads/1.jpg"
                },
                "hover": {
                  "type": "image",
                  "url": "/uploads/2.jpg"
                }
              },
              "stock": 10,
              "status": "ACTIVE",
              "isNewArrival": true,
              "sizes": [
                "S",
                "M",
                "L"
              ],
              "sizeDescriptions": [],
              "colors": [
                "Black"
              ],
              "details": null,
              "stylingTip": null,
              "deletedAt": null,
              "createdAt": "2025-01-01T00:00:00.000Z",
              "updatedAt": "2025-01-01T00:00:00.000Z",
              "averageRating": 4.5,
              "ratingCount": 12,
              "soldQty": 25
            }
          ],
          "pagination": {
            "total": 42,
            "page": 1,
            "limit": 20,
            "totalPages": 3
          },
          "appliedFilters": {
            "sort": "newest",
            "availability": "all"
          }
        }
      },
      "ProductResponse": {
        "type": "object",
        "description": "Full response body returned by get/create/update/delete/status/stock: success, optional message, data.product (single product).",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true,
            "description": "Always true on 200/201"
          },
          "message": {
            "type": "string",
            "nullable": true,
            "description": "Optional i18n message (e.g. success.product.updated)"
          },
          "data": {
            "type": "object",
            "required": [
              "product"
            ],
            "properties": {
              "product": {
                "$ref": "#/components/schemas/ProductData"
              }
            },
            "description": "Single product payload"
          }
        },
        "example": {
          "success": true,
          "message": "Product updated successfully",
          "data": {
            "product": {
              "_id": "507f1f77bcf86cd799439011",
              "name": {
                "en": "Product name",
                "ar": "اسم المنتج"
              },
              "description": {
                "en": "Description",
                "ar": "الوصف"
              },
              "category": {
                "_id": "507f1f77bcf86cd799439012",
                "name": {
                  "en": "Category",
                  "ar": "فئة"
                },
                "status": "PUBLISHED"
              },
              "price": 99.99,
              "discountPrice": 79.99,
              "media": {
                "default": {
                  "type": "image",
                  "url": "/uploads/1.jpg"
                },
                "hover": {
                  "type": "image",
                  "url": "/uploads/2.jpg"
                },
                "previewVideo": {
                  "type": "video",
                  "url": "/uploads/video.mp4"
                }
              },
              "images": [
                "/uploads/1.jpg",
                "/uploads/2.jpg"
              ],
              "imageColors": [
                "",
                ""
              ],
              "videos": [
                "/uploads/video.mp4"
              ],
              "stock": 10,
              "status": "ACTIVE",
              "isNewArrival": true,
              "sizes": [
                "S",
                "M",
                "L"
              ],
              "sizeDescriptions": [],
              "colors": [
                "Black"
              ],
              "details": null,
              "stylingTip": null,
              "deletedAt": null,
              "createdAt": "2025-01-01T00:00:00.000Z",
              "updatedAt": "2025-01-01T00:00:00.000Z"
            }
          }
        }
      },
      "RelatedProductsResponse": {
        "type": "object",
        "description": "Full response body returned by related products: success, data (array of ProductListItem).",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true,
            "description": "Always true on 200"
          },
          "message": {
            "type": "string",
            "nullable": true,
            "description": "Optional i18n message"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductListItem"
            },
            "description": "Related products (same category); media only"
          }
        },
        "example": {
          "success": true,
          "data": [
            {
              "_id": "507f1f77bcf86cd799439013",
              "name": {
                "en": "Related product",
                "ar": "منتج مرتبط"
              },
              "description": {
                "en": "Description",
                "ar": "الوصف"
              },
              "category": {
                "_id": "507f1f77bcf86cd799439012",
                "name": {
                  "en": "Category",
                  "ar": "فئة"
                },
                "status": "PUBLISHED"
              },
              "price": 89.99,
              "discountPrice": null,
              "media": {
                "default": {
                  "type": "image",
                  "url": "/uploads/2.jpg"
                }
              },
              "stock": 5,
              "status": "ACTIVE",
              "isNewArrival": false,
              "sizes": [],
              "sizeDescriptions": [],
              "colors": [],
              "details": null,
              "stylingTip": null,
              "deletedAt": null,
              "createdAt": "2025-01-01T00:00:00.000Z",
              "updatedAt": "2025-01-01T00:00:00.000Z"
            }
          ]
        }
      },
      "UploadUrlsResponse": {
        "type": "object",
        "description": "Uploaded image or video URLs",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "urls": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "CategoryData": {
        "type": "object",
        "description": "Category item (includes status for store filtering)",
        "properties": {
          "_id": {
            "type": "string"
          },
          "name": {
            "type": "object",
            "properties": {
              "en": {
                "type": "string"
              },
              "ar": {
                "type": "string"
              }
            }
          },
          "description": {
            "type": "object",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "visible",
              "hidden"
            ],
            "description": "Store may filter by PUBLISHED (alias for visible)"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CategoriesResponse": {
        "type": "object",
        "description": "Full response: success, data.categories (array with status)",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "nullable": true
          },
          "data": {
            "type": "object",
            "required": [
              "categories"
            ],
            "properties": {
              "categories": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/CategoryData"
                },
                "description": "Categories (each includes status)"
              }
            }
          }
        }
      },
      "CategoryResponse": {
        "type": "object",
        "description": "Single category",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "category": {
                "type": "object"
              }
            }
          }
        }
      },
      "OrderItem": {
        "type": "object",
        "description": "Order line item. For GET /api/orders/:id, product is always populated (full or minimal if deleted).",
        "properties": {
          "product": {
            "description": "Product ID (list) or populated product object (single order: _id, name { en, ar }, images; minimal object if product deleted)",
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "properties": {
                  "_id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "object",
                    "properties": {
                      "en": {
                        "type": "string"
                      },
                      "ar": {
                        "type": "string"
                      }
                    }
                  },
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "price": {
                    "type": "number"
                  },
                  "discountPrice": {
                    "type": "number",
                    "nullable": true
                  }
                }
              }
            ]
          },
          "quantity": {
            "type": "integer"
          },
          "price": {
            "type": "number"
          }
        }
      },
      "StructuredAddress": {
        "type": "object",
        "description": "Shopify-style structured address (Egypt only)",
        "properties": {
          "address": {
            "type": "string",
            "minLength": 1,
            "maxLength": 500,
            "description": "Required. Street address",
            "example": "735 Clarendon Street"
          },
          "apartment": {
            "type": "string",
            "maxLength": 100,
            "description": "Optional",
            "example": "Apt 4B"
          },
          "city": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Required. City or governorate",
            "example": "Cairo"
          },
          "postalCode": {
            "type": "string",
            "maxLength": 20,
            "description": "Optional",
            "example": "11511"
          },
          "country": {
            "type": "string",
            "maxLength": 50,
            "description": "Optional, default Egypt",
            "default": "Egypt",
            "example": "Egypt"
          }
        },
        "required": [
          "address",
          "city"
        ]
      },
      "OrderData": {
        "type": "object",
        "description": "Order document (user null for guest checkout; guest fields set instead). Includes both legacy flat fields and new Shopify-style structured fields.",
        "properties": {
          "_id": {
            "type": "string"
          },
          "user": {
            "type": "string",
            "nullable": true,
            "description": "User ID when authenticated; null for guest"
          },
          "guestName": {
            "type": "string",
            "nullable": true,
            "description": "Legacy: guest checkout name (auto-derived from firstName+lastName when new fields used)"
          },
          "guestEmail": {
            "type": "string",
            "nullable": true,
            "description": "Legacy: guest checkout email"
          },
          "guestPhone": {
            "type": "string",
            "nullable": true,
            "description": "Legacy: guest checkout phone"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrderItem"
            }
          },
          "total": {
            "type": "number"
          },
          "deliveryFee": {
            "type": "number",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "PENDING",
              "CONFIRMED",
              "SHIPPED",
              "DELIVERED",
              "CANCELLED"
            ]
          },
          "paymentMethod": {
            "type": "string",
            "enum": [
              "COD",
              "INSTAPAY"
            ],
            "nullable": true
          },
          "shippingAddress": {
            "description": "Flat string (legacy orders) OR structured address object (new orders)",
            "nullable": true,
            "oneOf": [
              {
                "type": "string"
              },
              {
                "$ref": "#/components/schemas/StructuredAddress"
              }
            ]
          },
          "email": {
            "type": "string",
            "nullable": true,
            "description": "Customer contact email"
          },
          "firstName": {
            "type": "string",
            "nullable": true,
            "description": "Customer first name"
          },
          "lastName": {
            "type": "string",
            "nullable": true,
            "description": "Customer last name"
          },
          "phone": {
            "type": "string",
            "nullable": true,
            "description": "Customer phone number"
          },
          "billingAddress": {
            "nullable": true,
            "description": "null = same as shipping",
            "allOf": [
              {
                "$ref": "#/components/schemas/StructuredAddress"
              }
            ]
          },
          "specialInstructions": {
            "type": "string",
            "nullable": true,
            "description": "Order notes from customer"
          },
          "shippingMethod": {
            "type": "string",
            "nullable": true,
            "description": "e.g. 'standard'",
            "default": "standard"
          },
          "emailNews": {
            "type": "boolean",
            "description": "Opted into email marketing",
            "default": false
          },
          "textNews": {
            "type": "boolean",
            "description": "Opted into SMS marketing",
            "default": false
          },
          "discountCode": {
            "type": "string",
            "nullable": true,
            "description": "Applied discount code (e.g. SAVE10)"
          },
          "discountAmount": {
            "type": "number",
            "nullable": true,
            "description": "Discount amount in EGP"
          },
          "payment": {
            "type": "object",
            "nullable": true,
            "properties": {
              "method": {
                "type": "string"
              },
              "status": {
                "type": "string"
              },
              "instaPayProofUrl": {
                "type": "string",
                "nullable": true
              }
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PaginatedOrdersResponse": {
        "type": "object",
        "description": "Full response: success, data (array of orders), top-level pagination",
        "required": [
          "success",
          "data",
          "pagination"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "nullable": true
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrderData"
            },
            "description": "Orders list"
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        }
      },
      "OrderResponse": {
        "type": "object",
        "description": "Full response: success, optional message, data.order (single order; includes guest fields when guest checkout)",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "nullable": true,
            "description": "e.g. success.order.created"
          },
          "data": {
            "type": "object",
            "required": [
              "order"
            ],
            "properties": {
              "order": {
                "$ref": "#/components/schemas/OrderData"
              }
            }
          }
        }
      },
      "PaginatedUsersResponse": {
        "type": "object",
        "description": "Paginated users list",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "users": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      },
      "CustomerResponse": {
        "type": "object",
        "description": "Single customer/user",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "user": {
                "type": "object"
              }
            }
          }
        }
      },
      "CustomerOrdersResponse": {
        "type": "object",
        "description": "Customer orders list",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "orders": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "CitiesResponse": {
        "type": "object",
        "description": "Cities list",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "cities": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "CityResponse": {
        "type": "object",
        "description": "Single city",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "city": {
                "type": "object"
              }
            }
          }
        }
      },
      "PaginatedContactResponse": {
        "type": "object",
        "description": "Paginated contact submissions",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "submissions": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      },
      "PaginatedFeedbackResponse": {
        "type": "object",
        "description": "Paginated feedback list",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "feedbacks": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      },
      "FeedbackResponse": {
        "type": "object",
        "description": "Single feedback",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "feedback": {
                "type": "object"
              }
            }
          }
        }
      },
      "SingleUrlResponse": {
        "type": "object",
        "description": "Single image or video URL",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "url": {
                "type": "string"
              }
            }
          }
        }
      },
      "InventoryListResponse": {
        "type": "object",
        "description": "Full response: products with low or zero stock (data.products + optional data.threshold)",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "$ref": "#/components/schemas/InventoryProductsData"
          }
        }
      },
      "DashboardStatsResponse": {
        "type": "object",
        "description": "Dashboard statistics",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "totalOrders": {
                "type": "integer"
              },
              "totalRevenue": {
                "type": "number"
              },
              "totalUsers": {
                "type": "integer"
              },
              "ordersThisMonth": {
                "type": "integer"
              },
              "revenueThisMonth": {
                "type": "number"
              }
            }
          }
        }
      },
      "TopSellingResponse": {
        "type": "object",
        "description": "Full response: top selling products (data.topSelling)",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "$ref": "#/components/schemas/TopSellingData"
          }
        }
      },
      "SettingsResponse": {
        "type": "object",
        "description": "Full settings object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "description": "Store, hero, collections, etc."
          }
        }
      },
      "ReportsResponse": {
        "type": "object",
        "description": "Reports (sales, orders, etc.)",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "sales": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              },
              "orders": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "AiSettingsData": {
        "type": "object",
        "description": "AI widget settings payload",
        "required": [
          "enabled",
          "greeting",
          "suggestedQuestions"
        ],
        "properties": {
          "enabled": {
            "type": "boolean",
            "description": "Whether AI assistant is enabled"
          },
          "greeting": {
            "type": "object",
            "required": [
              "en",
              "ar"
            ],
            "properties": {
              "en": {
                "type": "string"
              },
              "ar": {
                "type": "string"
              }
            },
            "description": "Greeting text (en/ar)"
          },
          "suggestedQuestions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "en": {
                  "type": "string"
                },
                "ar": {
                  "type": "string"
                }
              }
            },
            "description": "Suggested questions for the chat widget"
          }
        }
      },
      "AiProductCard": {
        "type": "object",
        "description": "Product card shown in chat (id, name, image, productUrl)",
        "required": [
          "id",
          "name",
          "image",
          "productUrl"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "object",
            "properties": {
              "en": {
                "type": "string"
              },
              "ar": {
                "type": "string"
              }
            }
          },
          "image": {
            "type": "string"
          },
          "productUrl": {
            "type": "string"
          }
        }
      },
      "AiChatData": {
        "type": "object",
        "description": "AI chat reply payload (sessionId, response text, optional product cards)",
        "required": [
          "sessionId",
          "response",
          "productCards"
        ],
        "properties": {
          "sessionId": {
            "type": "string",
            "description": "Session ID to continue the conversation"
          },
          "response": {
            "type": "string",
            "description": "Assistant reply text (plain, no [id:xxx] tags)"
          },
          "productCards": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AiProductCard"
            },
            "description": "Product cards to display with this reply (if any)"
          }
        }
      },
      "AiSessionListItem": {
        "type": "object",
        "description": "Session summary in list",
        "properties": {
          "id": {
            "type": "string",
            "description": "MongoDB _id"
          },
          "sessionId": {
            "type": "string"
          },
          "messageCount": {
            "type": "integer"
          },
          "customerName": {
            "type": "string",
            "nullable": true
          },
          "customerEmail": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "closed"
            ]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "AiSessionsData": {
        "type": "object",
        "description": "Paginated sessions list payload",
        "required": [
          "sessions",
          "total",
          "page",
          "limit"
        ],
        "properties": {
          "sessions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AiSessionListItem"
            }
          },
          "total": {
            "type": "integer",
            "description": "Total session count"
          },
          "page": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          }
        }
      },
      "AiChatMessage": {
        "type": "object",
        "description": "Single message in a chat session",
        "required": [
          "role",
          "content",
          "timestamp"
        ],
        "properties": {
          "role": {
            "type": "string",
            "enum": [
              "user",
              "assistant"
            ]
          },
          "content": {
            "type": "string"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "productCards": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AiProductCard"
            },
            "description": "Present only on assistant messages when products are suggested"
          }
        }
      },
      "AiSessionDetailData": {
        "type": "object",
        "description": "Full session with all messages (Admin)",
        "required": [
          "id",
          "sessionId",
          "messages",
          "status",
          "createdAt",
          "updatedAt"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "MongoDB _id"
          },
          "sessionId": {
            "type": "string"
          },
          "messages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AiChatMessage"
            }
          },
          "customerName": {
            "type": "string",
            "nullable": true
          },
          "customerEmail": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "closed"
            ]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "AiSettingsResponse": {
        "type": "object",
        "description": "Full response: AI settings (enabled, greeting, suggested questions)",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "$ref": "#/components/schemas/AiSettingsData"
          }
        }
      },
      "AiChatResponse": {
        "type": "object",
        "description": "Full response: AI chat reply and sessionId",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "$ref": "#/components/schemas/AiChatData"
          }
        }
      },
      "AiSessionsResponse": {
        "type": "object",
        "description": "Full response: paginated AI sessions list",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "$ref": "#/components/schemas/AiSessionsData"
          }
        }
      },
      "AiSessionDetailResponse": {
        "type": "object",
        "description": "Full response: AI session with messages",
        "required": [
          "success",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "$ref": "#/components/schemas/AiSessionDetailData"
          }
        }
      },
      "ShippingMethod": {
        "type": "object",
        "description": "Available shipping method",
        "properties": {
          "id": {
            "type": "string",
            "example": "standard"
          },
          "name": {
            "type": "object",
            "properties": {
              "en": {
                "type": "string",
                "example": "Standard"
              },
              "ar": {
                "type": "string",
                "example": "عادي"
              }
            }
          },
          "description": {
            "type": "object",
            "properties": {
              "en": {
                "type": "string",
                "example": "Delivery in 3–5 business days"
              },
              "ar": {
                "type": "string",
                "example": "التوصيل خلال ٣-٥ أيام عمل"
              }
            }
          },
          "estimatedDays": {
            "type": "string",
            "example": "3-5"
          }
        }
      }
    }
  },
  "paths": {
    "/api/health": {
      "get": {
        "operationId": "healthCheck",
        "tags": [
          "Health"
        ],
        "summary": "Health check",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Health"
                }
              }
            }
          }
        }
      }
    },
    "/api/store/home": {
      "get": {
        "operationId": "getStoreHome",
        "tags": [
          "Store"
        ],
        "summary": "Get unified home page data (store config, hero, new arrivals, collections, feedbacks, announcement bar)",
        "responses": {
          "200": {
            "description": "Complete home page data for storefront",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreHomeResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/store/page/{slug}": {
      "get": {
        "operationId": "getPageBySlug",
        "tags": [
          "Store"
        ],
        "summary": "Get footer page content by slug (privacy, return-policy, shipping-policy, about, contact)",
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Page content (rich text)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PageResponse"
                }
              }
            }
          },
          "404": {
            "description": "Page not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/store/contact": {
      "post": {
        "operationId": "submitStoreContact",
        "tags": [
          "Store"
        ],
        "summary": "Submit Contact Us form (public)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "email",
                  "comment"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200,
                    "description": "Required"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Required"
                  },
                  "phone": {
                    "type": "string",
                    "maxLength": 50,
                    "description": "Optional"
                  },
                  "comment": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 5000,
                    "description": "Required"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Contact form submitted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageDataResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/newsletter/subscribe": {
      "post": {
        "operationId": "subscribeNewsletter",
        "tags": [
          "Newsletter"
        ],
        "summary": "Subscribe email to newsletter (public)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "maxLength": 254
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Subscribed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageDataResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "409": {
            "description": "Email already subscribed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewsletterConflictResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/sign-in": {
      "post": {
        "operationId": "signIn",
        "tags": [
          "Auth"
        ],
        "summary": "Sign in",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6,
                    "description": "Required, min 6 characters"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success; sets cookie and returns token and user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/sign-up": {
      "post": {
        "operationId": "signUp",
        "tags": [
          "Auth"
        ],
        "summary": "Register",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password",
                  "name"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6,
                    "maxLength": 128
                  },
                  "name": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created; sets cookie and returns token and user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "409": {
            "description": "User already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/profile": {
      "get": {
        "operationId": "getProfile",
        "tags": [
          "Auth"
        ],
        "summary": "Current user profile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/sign-out": {
      "post": {
        "operationId": "signOut",
        "tags": [
          "Auth"
        ],
        "summary": "Sign out",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Signed out",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SignOutResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/subscribers": {
      "get": {
        "operationId": "listSubscribers",
        "tags": [
          "Subscribers"
        ],
        "summary": "List newsletter subscribers (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated subscribers",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedSubscribersResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/filters/sort": {
      "get": {
        "operationId": "getSortFilters",
        "tags": [
          "Products"
        ],
        "summary": "Get sort options (Shopify-style)",
        "description": "Returns sort options in Shopify ProductCollectionSortKeys style. Use data[].value in GET /api/products?sort=.",
        "responses": {
          "200": {
            "description": "Sort options",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SortFiltersResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/products": {
      "get": {
        "operationId": "listProducts",
        "tags": [
          "Products"
        ],
        "summary": "List products",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Page number (default 1)"
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Items per page (default 20, max 100)"
          },
          {
            "name": "category",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Category ID filter"
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search in name/description"
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "ACTIVE",
                "INACTIVE",
                "DRAFT"
              ]
            },
            "description": "Product status (storefront uses ACTIVE)"
          },
          {
            "name": "newArrival",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ]
            },
            "description": "Filter by new-arrival flag (home page uses true)"
          },
          {
            "name": "availability",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "all",
                "inStock",
                "outOfStock"
              ],
              "default": "all"
            },
            "description": "Stock filter"
          },
          {
            "name": "sort",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "BEST_SELLING",
                "CREATED_DESC",
                "PRICE_ASC",
                "PRICE_DESC",
                "TITLE_ASC",
                "TITLE_DESC",
                "MANUAL"
              ],
              "default": "CREATED_DESC"
            },
            "description": "Sort order (Shopify-style; legacy values also accepted)"
          },
          {
            "name": "minPrice",
            "in": "query",
            "schema": {
              "type": "number"
            },
            "description": "Min price (EGP)"
          },
          {
            "name": "maxPrice",
            "in": "query",
            "schema": {
              "type": "number"
            },
            "description": "Max price (EGP)"
          },
          {
            "name": "color",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by color (case-insensitive)"
          },
          {
            "name": "minRating",
            "in": "query",
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 5
            },
            "description": "Only products with average rating >= this (1–5)"
          },
          {
            "name": "tags",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by tags (comma-separated). Matches products with any of the tags. Use with GET /api/products for storefront product listing when user clicks a tag."
          },
          {
            "name": "vendor",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by vendor/brand (case-insensitive)"
          },
          {
            "name": "hasDiscount",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ]
            },
            "description": "Filter products with/without discount"
          },
          {
            "name": "slug",
            "in": "query",
            "schema": {
              "type": "string",
              "default": "*"
            },
            "description": "Lookup by slug.en or slug.ar (e.g. embroidered-malhafa-sale). Returns products with exact match. Use \"*\" to list all. Optional; defaults to \"*\" when omitted (storefront-friendly)."
          },
          {
            "name": "for",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "storefront"
              ]
            },
            "description": "When storefront, returns slim product shape (tags included for clickable filter links; vendor, imageColors, etc. omitted)"
          }
        ],
        "responses": {
          "200": {
            "description": "Products list: success, data (array), pagination",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedProductsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "post": {
        "operationId": "createProduct",
        "tags": [
          "Products"
        ],
        "summary": "Create product (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "nameEn",
                  "nameAr",
                  "price",
                  "stock",
                  "category"
                ],
                "properties": {
                  "nameEn": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 500
                  },
                  "nameAr": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 500
                  },
                  "descriptionEn": {
                    "type": "string",
                    "maxLength": 10000
                  },
                  "descriptionAr": {
                    "type": "string",
                    "maxLength": 10000
                  },
                  "price": {
                    "type": "number",
                    "exclusiveMinimum": 0
                  },
                  "discountPrice": {
                    "type": "number",
                    "exclusiveMinimum": 0
                  },
                  "costPerItem": {
                    "type": "number",
                    "exclusiveMinimum": 0
                  },
                  "stock": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "category": {
                    "type": "string",
                    "minLength": 1
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "INACTIVE",
                      "DRAFT"
                    ]
                  },
                  "isNewArrival": {
                    "type": "boolean"
                  },
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "maxItems": 20
                  },
                  "viewImage": {
                    "type": "string"
                  },
                  "hoverImage": {
                    "type": "string"
                  },
                  "detailsEn": {
                    "type": "string"
                  },
                  "detailsAr": {
                    "type": "string"
                  },
                  "sizes": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "colors": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "tags": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "vendor": {
                    "type": "string",
                    "maxLength": 200
                  },
                  "slugEn": {
                    "type": "string"
                  },
                  "slugAr": {
                    "type": "string"
                  },
                  "metaTitleEn": {
                    "type": "string",
                    "maxLength": 70
                  },
                  "metaDescriptionEn": {
                    "type": "string",
                    "maxLength": 160
                  },
                  "weight": {
                    "type": "number"
                  },
                  "weightUnit": {
                    "type": "string",
                    "enum": [
                      "g",
                      "kg"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created product",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/{id}": {
      "get": {
        "operationId": "getProduct",
        "tags": [
          "Products"
        ],
        "summary": "Get product by ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "color",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Filter media/images by color (e.g. Black). When set, media and images arrays show only images for that color."
          },
          {
            "name": "size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "When provided with color, response includes selectedVariant for that color+size (stock, outOfStock). Enables variant-specific data without redundant calls."
          },
          {
            "name": "for",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "storefront"
              ]
            },
            "description": "When storefront, returns slim product shape with tags included for clickable filter links on product detail"
          }
        ],
        "responses": {
          "200": {
            "description": "Product",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "put": {
        "operationId": "updateProduct",
        "tags": [
          "Products"
        ],
        "summary": "Update product (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated product",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "operationId": "deleteProduct",
        "tags": [
          "Products"
        ],
        "summary": "Delete product (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageDataResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/{id}/related": {
      "get": {
        "operationId": "getRelatedProducts",
        "tags": [
          "Products"
        ],
        "summary": "Get related products",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Related products list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RelatedProductsResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/{id}/status": {
      "patch": {
        "operationId": "setProductStatus",
        "tags": [
          "Products"
        ],
        "summary": "Set product status DRAFT/PUBLISHED (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "DRAFT",
                      "PUBLISHED"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/{id}/stock": {
      "patch": {
        "operationId": "updateProductStock",
        "tags": [
          "Products"
        ],
        "summary": "Update product stock (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "stock"
                ],
                "properties": {
                  "stock": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Stock updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/images": {
      "post": {
        "operationId": "uploadProductImages",
        "tags": [
          "Products"
        ],
        "summary": "Upload product images (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Uploaded image URLs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadUrlsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/videos": {
      "post": {
        "operationId": "uploadProductVideos",
        "tags": [
          "Products"
        ],
        "summary": "Upload product videos (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "videos": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Uploaded video URLs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadUrlsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/categories": {
      "get": {
        "operationId": "listCategories",
        "tags": [
          "Categories"
        ],
        "summary": "List categories (optionally filter by status; store may use status=PUBLISHED for visible)",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "visible",
                "hidden",
                "PUBLISHED"
              ]
            },
            "description": "Filter by status; PUBLISHED is alias for visible"
          }
        ],
        "responses": {
          "200": {
            "description": "Categories list (each category includes status)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoriesResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "operationId": "createCategory",
        "tags": [
          "Categories"
        ],
        "summary": "Create category (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created category",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/categories/{id}": {
      "put": {
        "operationId": "updateCategory",
        "tags": [
          "Categories"
        ],
        "summary": "Update category (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated category",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "operationId": "setCategoryStatus",
        "tags": [
          "Categories"
        ],
        "summary": "Set category status (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "DRAFT",
                      "PUBLISHED"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "operationId": "deleteCategory",
        "tags": [
          "Categories"
        ],
        "summary": "Delete category (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageDataResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders": {
      "get": {
        "operationId": "listOrders",
        "tags": [
          "Orders"
        ],
        "summary": "List orders",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Page (default 1)"
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Limit (default 20, max 100)"
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "PENDING",
                "CONFIRMED",
                "SHIPPED",
                "DELIVERED",
                "CANCELLED"
              ]
            }
          },
          {
            "name": "paymentMethod",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "COD",
                "INSTAPAY"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success, data (array of orders), pagination",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedOrdersResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "post": {
        "operationId": "createOrder",
        "tags": [
          "Orders"
        ],
        "summary": "Create order (authenticated or guest checkout)",
        "description": "Required: items and shippingAddress. Guest checkout: also require guestName/guestEmail (or firstName/lastName/email). Logged-in: contact fields can be omitted (filled from account).",
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "items",
                  "shippingAddress"
                ],
                "properties": {
                  "items": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": [
                        "product",
                        "quantity",
                        "price"
                      ],
                      "properties": {
                        "product": {
                          "type": "string"
                        },
                        "quantity": {
                          "type": "integer",
                          "minimum": 1
                        },
                        "price": {
                          "type": "number",
                          "exclusiveMinimum": 0
                        }
                      }
                    }
                  },
                  "paymentMethod": {
                    "type": "string",
                    "enum": [
                      "COD",
                      "INSTAPAY"
                    ]
                  },
                  "shippingAddress": {
                    "description": "Required. Flat string (max 1000 chars) OR structured address object { address, city required }",
                    "oneOf": [
                      {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 1000
                      },
                      {
                        "$ref": "#/components/schemas/StructuredAddress"
                      }
                    ]
                  },
                  "deliveryFee": {
                    "type": "number"
                  },
                  "guestName": {
                    "type": "string",
                    "description": "Legacy: required for guest checkout if firstName/lastName not provided"
                  },
                  "guestEmail": {
                    "type": "string",
                    "format": "email",
                    "description": "Legacy: required for guest checkout if email not provided"
                  },
                  "guestPhone": {
                    "type": "string",
                    "description": "Legacy: optional for guest checkout"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Customer contact email"
                  },
                  "firstName": {
                    "type": "string",
                    "description": "Customer first name"
                  },
                  "lastName": {
                    "type": "string",
                    "description": "Customer last name"
                  },
                  "phone": {
                    "type": "string",
                    "description": "Customer phone number"
                  },
                  "billingAddress": {
                    "description": "null = same as shipping",
                    "nullable": true,
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/StructuredAddress"
                      }
                    ]
                  },
                  "specialInstructions": {
                    "type": "string",
                    "description": "Order notes from customer"
                  },
                  "shippingMethod": {
                    "type": "string",
                    "description": "e.g. 'standard', 'express'",
                    "default": "standard"
                  },
                  "emailNews": {
                    "type": "boolean",
                    "description": "Opted into email marketing",
                    "default": false
                  },
                  "textNews": {
                    "type": "boolean",
                    "description": "Opted into SMS marketing",
                    "default": false
                  },
                  "discountCode": {
                    "type": "string",
                    "description": "Optional discount code to apply"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Success, message, data.order (includes both legacy guest fields and new structured fields)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error: items and shippingAddress required; guest checkout requires guestName/guestEmail or firstName/lastName/email; invalid discount code",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/guest/{id}": {
      "get": {
        "operationId": "getGuestOrder",
        "tags": [
          "Orders"
        ],
        "summary": "Get guest order by ID (public)",
        "description": "Public endpoint for guests to look up their order after checkout. Use when sessionStorage is cleared (e.g. tab closed). Requires email query param to match the order's email for security.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Order ID"
          },
          {
            "name": "email",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "email"
            },
            "description": "Guest email (must match order email)"
          }
        ],
        "responses": {
          "200": {
            "description": "Success, data.order (same shape as GET /api/orders/{id})",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          },
          "400": {
            "description": "Missing or invalid email query parameter",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (logged-in orders must use authenticated endpoint)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Order not found or email does not match",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{id}": {
      "get": {
        "operationId": "getOrder",
        "tags": [
          "Orders"
        ],
        "summary": "Get order by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success, data.order (with payment; guest orders include guest fields)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{id}/status": {
      "patch": {
        "operationId": "updateOrderStatus",
        "tags": [
          "Orders"
        ],
        "summary": "Update order status (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{id}/cancel": {
      "post": {
        "operationId": "cancelOrder",
        "tags": [
          "Orders"
        ],
        "summary": "Cancel order (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Order cancelled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{id}/payment-proof": {
      "post": {
        "operationId": "attachPaymentProof",
        "tags": [
          "Orders"
        ],
        "summary": "Upload payment proof for order (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Proof attached",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{id}/payments/confirm": {
      "post": {
        "operationId": "confirmPayment",
        "tags": [
          "Orders"
        ],
        "summary": "Confirm payment for order (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "approved"
                ],
                "properties": {
                  "approved": {
                    "type": "boolean",
                    "description": "true = confirm payment, false = revoke"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment confirmed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/checkout": {
      "post": {
        "operationId": "checkout",
        "tags": [
          "Checkout"
        ],
        "summary": "Complete checkout (create order)",
        "description": "Same request body as POST /api/orders. Required: items and shippingAddress. Guest: also require guestName/guestEmail (or firstName/lastName/email). Logged-in: contact fields optional (filled from account). shippingAddress.city can be city name or city _id; backend resolves _id to name.",
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "items",
                  "shippingAddress"
                ],
                "properties": {
                  "items": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": [
                        "product",
                        "quantity",
                        "price"
                      ],
                      "properties": {
                        "product": {
                          "type": "string",
                          "description": "Product ID"
                        },
                        "quantity": {
                          "type": "integer",
                          "minimum": 1
                        },
                        "price": {
                          "type": "number",
                          "exclusiveMinimum": 0
                        }
                      }
                    }
                  },
                  "paymentMethod": {
                    "type": "string",
                    "enum": [
                      "COD",
                      "INSTAPAY"
                    ]
                  },
                  "shippingAddress": {
                    "description": "Required. Flat string (max 1000) OR structured { address, city required }. city can be name or city _id.",
                    "oneOf": [
                      {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 1000
                      },
                      {
                        "$ref": "#/components/schemas/StructuredAddress"
                      }
                    ]
                  },
                  "deliveryFee": {
                    "type": "number",
                    "minimum": 0
                  },
                  "guestName": {
                    "type": "string",
                    "description": "Guest checkout: required if firstName/lastName not provided"
                  },
                  "guestEmail": {
                    "type": "string",
                    "format": "email",
                    "description": "Guest checkout: required if email not provided"
                  },
                  "guestPhone": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Optional when logged in (filled from account)"
                  },
                  "firstName": {
                    "type": "string",
                    "description": "Optional when logged in (filled from account)"
                  },
                  "lastName": {
                    "type": "string",
                    "description": "Optional when logged in (filled from account)"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "billingAddress": {
                    "nullable": true,
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/StructuredAddress"
                      }
                    ]
                  },
                  "specialInstructions": {
                    "type": "string"
                  },
                  "shippingMethod": {
                    "type": "string",
                    "default": "standard"
                  },
                  "emailNews": {
                    "type": "boolean",
                    "default": false
                  },
                  "textNews": {
                    "type": "boolean",
                    "default": false
                  },
                  "discountCode": {
                    "type": "string",
                    "description": "Optional discount code to apply. If invalid/expired/not applicable, returns 400 with a clear message."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Order created; data.order returned (includes guest fields, discountCode, discountAmount when applied)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error: items and shippingAddress required; guest checkout missing name/email; invalid/expired discount code",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "503": {
            "description": "Database unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/shipping-methods": {
      "get": {
        "operationId": "listShippingMethods",
        "tags": [
          "Checkout"
        ],
        "summary": "List available shipping methods",
        "description": "Returns available shipping methods with bilingual names and estimated delivery days. Prices are determined by the city delivery fee.",
        "security": [],
        "responses": {
          "200": {
            "description": "Array of shipping methods",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ShippingMethod"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/payment-methods": {
      "get": {
        "operationId": "getPaymentMethods",
        "tags": [
          "Checkout"
        ],
        "summary": "Get enabled payment methods",
        "description": "Returns payment methods enabled in store settings (e.g. COD, InstaPay) for e-commerce checkout. Public.",
        "security": [],
        "responses": {
          "200": {
            "description": "List of enabled payment methods with id and localized name",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "paymentMethods": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "enum": [
                                  "COD",
                                  "INSTAPAY"
                                ]
                              },
                              "name": {
                                "type": "object",
                                "properties": {
                                  "en": {
                                    "type": "string"
                                  },
                                  "ar": {
                                    "type": "string"
                                  }
                                }
                              },
                              "instaPayNumber": {
                                "type": "string",
                                "description": "Present only for INSTAPAY; store's InstaPay number for customer transfer."
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/users": {
      "get": {
        "operationId": "listUsers",
        "tags": [
          "Users"
        ],
        "summary": "List users (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedUsersResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{id}": {
      "get": {
        "operationId": "getCustomer",
        "tags": [
          "Users"
        ],
        "summary": "Get customer by ID (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Customer",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{id}/orders": {
      "get": {
        "operationId": "getCustomerOrders",
        "tags": [
          "Users"
        ],
        "summary": "Get customer orders (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Customer orders",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerOrdersResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{id}/role": {
      "patch": {
        "operationId": "updateUserRole",
        "tags": [
          "Users"
        ],
        "summary": "Update user role (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "role"
                ],
                "properties": {
                  "role": {
                    "type": "string",
                    "enum": [
                      "ADMIN",
                      "USER"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Role updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/roles": {
      "get": {
        "operationId": "listRoles",
        "tags": [
          "Roles"
        ],
        "summary": "List all roles (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of roles with permission counts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "roles": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "key": {
                                "type": "string"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "ACTIVE",
                                  "INACTIVE"
                                ]
                              },
                              "description": {
                                "type": "string",
                                "nullable": true
                              },
                              "permissionIds": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              },
                              "permissionsCount": {
                                "type": "integer"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "post": {
        "operationId": "createRole",
        "tags": [
          "Roles"
        ],
        "summary": "Create a new role (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "key"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Role display name"
                  },
                  "key": {
                    "type": "string",
                    "description": "Stable key (e.g. MANAGER). Uppercase letters, numbers, underscores."
                  },
                  "description": {
                    "type": "string",
                    "nullable": true
                  },
                  "permissionIds": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Permission IDs to assign"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Role created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "role": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "key": {
                              "type": "string"
                            },
                            "status": {
                              "type": "string"
                            },
                            "description": {
                              "type": "string",
                              "nullable": true
                            },
                            "permissionIds": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "permissionsCount": {
                              "type": "integer"
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "updatedAt": {
                              "type": "string",
                              "format": "date-time"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "409": {
            "description": "Role key already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/roles/permissions": {
      "get": {
        "operationId": "listPermissionDefinitions",
        "tags": [
          "Roles"
        ],
        "summary": "List all permission definitions (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of permission definitions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "permissions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "key": {
                                "type": "string"
                              },
                              "label": {
                                "type": "string"
                              },
                              "group": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string",
                                "nullable": true
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/roles/{id}": {
      "get": {
        "operationId": "getRole",
        "tags": [
          "Roles"
        ],
        "summary": "Get role by ID (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Role with permission IDs",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "role": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "key": {
                              "type": "string"
                            },
                            "status": {
                              "type": "string"
                            },
                            "description": {
                              "type": "string",
                              "nullable": true
                            },
                            "permissionIds": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "permissionsCount": {
                              "type": "integer"
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "updatedAt": {
                              "type": "string",
                              "format": "date-time"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Role not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "put": {
        "operationId": "updateRole",
        "tags": [
          "Roles"
        ],
        "summary": "Update role (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string",
                    "nullable": true
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "INACTIVE"
                    ]
                  },
                  "permissionIds": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Role updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "role": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "key": {
                              "type": "string"
                            },
                            "status": {
                              "type": "string"
                            },
                            "description": {
                              "type": "string",
                              "nullable": true
                            },
                            "permissionIds": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "permissionsCount": {
                              "type": "integer"
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "updatedAt": {
                              "type": "string",
                              "format": "date-time"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Role not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "operationId": "deleteRole",
        "tags": [
          "Roles"
        ],
        "summary": "Delete role (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Role deleted"
          },
          "400": {
            "description": "Cannot delete ADMIN role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Role not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/cities": {
      "get": {
        "operationId": "listCities",
        "tags": [
          "Cities"
        ],
        "summary": "List cities",
        "responses": {
          "200": {
            "description": "Cities list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CitiesResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "operationId": "createCity",
        "tags": [
          "Cities"
        ],
        "summary": "Create city (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "nameEn",
                  "nameAr"
                ],
                "properties": {
                  "nameEn": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100
                  },
                  "nameAr": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100
                  },
                  "deliveryFee": {
                    "type": "number",
                    "minimum": 0
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created city",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CityResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/cities/{id}": {
      "get": {
        "operationId": "getCity",
        "tags": [
          "Cities"
        ],
        "summary": "Get city by ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "City",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CityResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "put": {
        "operationId": "updateCity",
        "tags": [
          "Cities"
        ],
        "summary": "Update city (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated city",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CityResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "operationId": "deleteCity",
        "tags": [
          "Cities"
        ],
        "summary": "Delete city (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageDataResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/contact": {
      "get": {
        "operationId": "listContactSubmissions",
        "tags": [
          "Contact"
        ],
        "summary": "List contact form submissions (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated contact submissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedContactResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback": {
      "get": {
        "operationId": "listFeedback",
        "tags": [
          "Feedback"
        ],
        "summary": "List feedback (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated feedback",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedFeedbackResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "post": {
        "operationId": "createFeedback",
        "tags": [
          "Feedback"
        ],
        "summary": "Create feedback (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "product",
                  "customerName",
                  "message",
                  "rating"
                ],
                "properties": {
                  "product": {
                    "type": "string",
                    "description": "Product ID (required)"
                  },
                  "customerName": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200,
                    "description": "Required"
                  },
                  "message": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 2000,
                    "description": "Required"
                  },
                  "rating": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 5,
                    "description": "Required, 1-5"
                  },
                  "image": {
                    "type": "string",
                    "maxLength": 500,
                    "description": "Optional"
                  },
                  "approved": {
                    "type": "boolean",
                    "default": false,
                    "description": "Optional"
                  },
                  "order": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 0,
                    "description": "Display order"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created feedback",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/upload-image": {
      "post": {
        "operationId": "uploadFeedbackImage",
        "tags": [
          "Feedback"
        ],
        "summary": "Upload feedback image (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Image URL",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SingleUrlResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/{id}": {
      "get": {
        "operationId": "getFeedback",
        "tags": [
          "Feedback"
        ],
        "summary": "Get feedback by ID (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Feedback",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "put": {
        "operationId": "updateFeedback",
        "tags": [
          "Feedback"
        ],
        "summary": "Update feedback (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated feedback",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "operationId": "deleteFeedback",
        "tags": [
          "Feedback"
        ],
        "summary": "Delete feedback (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageDataResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback/{id}/approve": {
      "patch": {
        "operationId": "setFeedbackApproved",
        "tags": [
          "Feedback"
        ],
        "summary": "Approve feedback (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "approved"
                ],
                "properties": {
                  "approved": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Approval updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/inventory/low-stock": {
      "get": {
        "operationId": "getLowStock",
        "tags": [
          "Inventory"
        ],
        "summary": "Get low stock products (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Products with low stock",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InventoryListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/inventory/out-of-stock": {
      "get": {
        "operationId": "getOutOfStock",
        "tags": [
          "Inventory"
        ],
        "summary": "Get out-of-stock products (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Products with zero stock",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InventoryListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/stats": {
      "get": {
        "operationId": "getDashboardStats",
        "tags": [
          "Dashboard"
        ],
        "summary": "Dashboard statistics (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Stats (orders, revenue, users, etc.)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/top-selling": {
      "get": {
        "operationId": "getTopSelling",
        "tags": [
          "Dashboard"
        ],
        "summary": "Top selling products (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Top selling products",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TopSellingResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/settings": {
      "get": {
        "operationId": "getSettings",
        "tags": [
          "Settings"
        ],
        "summary": "Get settings",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Full settings object (store, hero, collections, etc.)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SettingsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "put": {
        "operationId": "updateSettings",
        "tags": [
          "Settings"
        ],
        "summary": "Update settings (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated settings",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SettingsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/settings/test-order-email": {
      "post": {
        "operationId": "sendTestOrderEmail",
        "tags": [
          "Settings"
        ],
        "summary": "Send test order notification email (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Email sent or skipped (if SMTP not configured)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageDataResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/settings/logo": {
      "post": {
        "operationId": "uploadLogo",
        "tags": [
          "Settings"
        ],
        "summary": "Upload store logo (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "logo": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Logo URL",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SingleUrlResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/settings/collection-image": {
      "post": {
        "operationId": "uploadCollectionImage",
        "tags": [
          "Settings"
        ],
        "summary": "Upload collection image (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Image URL",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SingleUrlResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/settings/hero-image": {
      "post": {
        "operationId": "uploadHeroImage",
        "tags": [
          "Settings"
        ],
        "summary": "Upload hero image (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Image URL",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SingleUrlResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/settings/hero-video": {
      "post": {
        "operationId": "uploadHeroVideo",
        "tags": [
          "Settings"
        ],
        "summary": "Upload hero video (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "video": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Video URL",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SingleUrlResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/settings/section-image": {
      "post": {
        "operationId": "uploadSectionImage",
        "tags": [
          "Settings"
        ],
        "summary": "Upload section image (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Image URL",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SingleUrlResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/settings/section-video": {
      "post": {
        "operationId": "uploadSectionVideo",
        "tags": [
          "Settings"
        ],
        "summary": "Upload section video (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "video": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Video URL",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SingleUrlResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/settings/promo-image": {
      "post": {
        "operationId": "uploadPromoImage",
        "tags": [
          "Settings"
        ],
        "summary": "Upload promo image (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Image URL",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SingleUrlResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/reports": {
      "get": {
        "operationId": "getReports",
        "tags": [
          "Reports"
        ],
        "summary": "Get reports data (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "to",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Reports (sales, orders, etc.)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReportsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ai/settings": {
      "get": {
        "operationId": "getAiSettings",
        "tags": [
          "AI"
        ],
        "summary": "Get AI widget settings (public)",
        "responses": {
          "200": {
            "description": "AI enabled, greeting, suggested questions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AiSettingsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/ai/chat": {
      "post": {
        "operationId": "postChat",
        "tags": [
          "AI"
        ],
        "summary": "Send chat message (public)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "message"
                ],
                "properties": {
                  "message": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 4000,
                    "description": "Required"
                  },
                  "sessionId": {
                    "type": "string",
                    "description": "Optional; omit to start new session"
                  },
                  "locale": {
                    "type": "string",
                    "enum": [
                      "en",
                      "ar"
                    ],
                    "description": "Optional response language"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "AI reply and sessionId",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AiChatResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ai/sessions": {
      "get": {
        "operationId": "listAiSessions",
        "tags": [
          "AI"
        ],
        "summary": "List chat sessions (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated sessions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AiSessionsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ai/sessions/{id}": {
      "get": {
        "operationId": "getSessionById",
        "tags": [
          "AI"
        ],
        "summary": "Get chat session with messages (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session and messages",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AiSessionDetailResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "operationId": "deleteSession",
        "tags": [
          "AI"
        ],
        "summary": "Delete chat session (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageDataResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                }
              }
            }
          }
        }
      }
    }
  }
}